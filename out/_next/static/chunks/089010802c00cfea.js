(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,27925,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(17927),r=e.i(75254);let i=(0,r.default)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]),n=(0,r.default)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]),l=(0,r.default)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),o=(0,r.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),c=(0,r.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var d=e.i(84614);let m=(0,r.default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),u=(0,r.default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),h=(0,r.default)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]),p=(0,r.default)("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),x=(0,r.default)("volume-x",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),v=(0,r.default)("maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]),g=({videoUrl:e,poster:s})=>{let[r,i]=(0,a.useState)(!1),[n,l]=(0,a.useState)(!1),[o,c]=(0,a.useState)(!0),[d,m]=(0,a.useState)(0),[g,j]=(0,a.useState)(0),[f,y]=(0,a.useState)(!1),k=(0,a.useRef)(null),b=(0,a.useRef)(null),N=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=k.current;if(!e)return;let t=()=>m(e.duration),a=()=>j(e.currentTime),s=()=>{i(!1),l(!0)};return e.addEventListener("loadedmetadata",t),e.addEventListener("timeupdate",a),e.addEventListener("ended",s),()=>{e.removeEventListener("loadedmetadata",t),e.removeEventListener("timeupdate",a),e.removeEventListener("ended",s)}},[]);let w=async()=>{let e=k.current;if(e)try{r?(e.pause(),i(!1)):(await e.play(),i(!0),l(!0),N.current&&clearTimeout(N.current),N.current=setTimeout(()=>{l(!1)},3e3))}catch(t){if(console.error("Video play failed:",t),!o){e.muted=!0,c(!0);try{await e.play(),i(!0),l(!0)}catch(e){console.error("Video play retry failed:",e)}}}},C=e=>{let t=Math.floor(e/60),a=Math.floor(e%60);return`${t}:${a.toString().padStart(2,"0")}`};return(0,t.jsxs)("div",{ref:b,className:"facebook-video-player",onMouseEnter:()=>l(!0),onMouseLeave:()=>{r&&N.current&&clearTimeout(N.current),r||l(!1)},onClick:e=>{(e.target===e.currentTarget||e.target===k.current)&&l(!0)},children:[(0,t.jsx)("video",{ref:k,src:e,poster:s,preload:"metadata",playsInline:!0,muted:o,crossOrigin:"anonymous",className:"facebook-video-element",onError:t=>{console.error("Video load error:",e,t);let a=t.currentTarget;a.src!==e&&(a.src=e,a.load())}}),!r&&(0,t.jsx)("div",{className:"video-play-overlay",onClick:w,children:(0,t.jsx)("div",{className:"play-button",children:(0,t.jsx)(u,{size:60,fill:"white",stroke:"white",strokeWidth:1})})}),(0,t.jsxs)("div",{className:`video-controls ${n?"visible":""}`,children:[(0,t.jsxs)("div",{className:"progress-container",onClick:e=>{let t=k.current;if(!t)return;let a=e.currentTarget.getBoundingClientRect(),s=(e.clientX-a.left)/a.width*d;t.currentTime=s,j(s)},children:[(0,t.jsx)("div",{className:"progress-bar",style:{width:d>0?`${g/d*100}%`:"0%"}}),(0,t.jsx)("div",{className:"progress-background"})]}),(0,t.jsxs)("div",{className:"control-buttons",children:[(0,t.jsx)("button",{className:"control-btn play-pause",onClick:w,children:r?(0,t.jsx)(h,{size:24}):(0,t.jsx)(u,{size:24})}),(0,t.jsxs)("div",{className:"time-display",children:[(0,t.jsx)("span",{className:"current-time",children:C(g)}),(0,t.jsx)("span",{className:"time-separator",children:"/"}),(0,t.jsx)("span",{className:"duration",children:C(d)})]}),(0,t.jsx)("button",{className:"control-btn volume",onClick:()=>{let e=k.current;e&&(e.muted=!e.muted,c(e.muted))},children:o?(0,t.jsx)(x,{size:24}):(0,t.jsx)(p,{size:24})}),(0,t.jsx)("button",{className:"control-btn fullscreen",onClick:()=>{let e=b.current;e&&(f?document.exitFullscreen&&document.exitFullscreen():e.requestFullscreen&&e.requestFullscreen(),y(!f))},children:(0,t.jsx)(v,{size:24})})]})]})]})},j=({post:e,currentUser:r,onLike:u,onShare:h})=>{let[p,x]=(0,a.useState)(!1),[v,j]=(0,a.useState)([]),[f,y]=(0,a.useState)(""),[k,b]=(0,a.useState)(0),[N,w]=(0,a.useState)(!1),[C,_]=(0,a.useState)(0),[L,S]=(0,a.useState)(!1),E=e.image_url?JSON.parse(e.image_url):[],M=E.length>1,z=(e=>{if(!e)return[];try{let t=JSON.parse(e);return Array.isArray(t)?t:[t]}catch{return[e]}})(e.video_url),$=z.length>0,q=e=>{try{let t=new URL(e).pathname.toLowerCase();return/\.(mp4|webm|ogg|avi|mov|wmv|flv|m4v|3gp)$/i.test(t)}catch{return!1}},T=(0,a.useCallback)(async()=>{try{let{data:t,error:a}=await s.supabase.from("comments").select(`
          *,
          profiles: user_id (username, full_name, avatar_url)
        `).eq("post_id",e.id).order("created_at",{ascending:!0});if(a)throw a;j(t||[])}catch(e){console.error("Error fetching comments:",e)}},[e.id]);(0,a.useEffect)(()=>{p&&T()},[p,T]);let U=async()=>{if(r&&f.trim())try{let{error:t}=await s.supabase.from("comments").insert({post_id:e.id,user_id:r.id,content:f.trim()});if(t)throw t;y(""),T()}catch(e){console.error("Error adding comment:",e)}},R=()=>{w(!1)};return(0,t.jsxs)("article",{className:"facebook-post-card",children:[(0,t.jsx)("div",{className:"post-header",children:(0,t.jsxs)("div",{className:"author-info",children:[(0,t.jsx)("div",{className:"author-avatar",children:e.author?.avatar_url?(0,t.jsx)("img",{src:e.author.avatar_url,alt:e.author.username}):(0,t.jsx)(d.User,{size:32})}),(0,t.jsxs)("div",{className:"author-details",children:[(0,t.jsx)("h3",{className:"author-name",children:e.author?.full_name||e.author?.username||"Anonymous"}),(0,t.jsxs)("span",{className:"post-time",children:[(0,t.jsx)(m,{size:14}),new Date(e.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]})}),(0,t.jsxs)("div",{className:"post-content",children:[e.title&&(0,t.jsx)("h4",{className:"post-title",children:e.title}),(0,t.jsxs)("div",{className:"post-text-container",children:[(0,t.jsxs)("div",{className:`post-text-wrapper ${!L?"truncated":""}`,children:[(0,t.jsx)("p",{className:"post-text",children:e.content}),!L&&e.content&&e.content.length>100&&(0,t.jsx)("button",{className:"read-more-btn",onClick:()=>S(!L),children:"Read More"})]}),L&&e.content&&e.content.length>100&&(0,t.jsx)("button",{className:"read-more-btn read-less-btn",onClick:()=>S(!L),children:"Read Less"})]})]}),E.length>0&&(0,t.jsx)("div",{className:"post-media",children:(0,t.jsxs)("div",{className:"media-container",children:[(0,t.jsx)("img",{src:E[k],alt:`Post media ${k+1}`,className:"post-media-image",onClick:()=>((e=0)=>{_(e),w(!0)})(k),style:{cursor:"pointer"}}),M&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{className:"media-nav prev",onClick:()=>{b(e=>(e-1+E.length)%E.length)},children:(0,t.jsx)(o,{size:24})}),(0,t.jsx)("button",{className:"media-nav next",onClick:()=>{b(e=>(e+1)%E.length)},children:(0,t.jsx)(c,{size:24})}),(0,t.jsx)("div",{className:"image-indicators",children:E.map((e,a)=>(0,t.jsx)("button",{className:`indicator ${a===k?"active":""}`,onClick:()=>b(a)},a))}),(0,t.jsxs)("div",{className:"image-counter",children:[k+1," / ",E.length]})]})]})}),$&&(0,t.jsx)("div",{className:"post-media",children:z.map((e,a)=>{let s=q(e),r=(e=>{if(q(e))return!1;try{let t=new URL(e).hostname.toLowerCase();return t.includes("youtube.com")||t.includes("youtu.be")||t.includes("vimeo.com")||t.includes("dailymotion.com")||t.includes("tiktok.com")||t.includes("instagram.com")||t.includes("facebook.com")||t.includes("twitter.com")||t.includes("x.com")}catch{return!1}})(e)?(e=>{try{let t=new URL(e),a=t.hostname.toLowerCase();if(a.includes("youtube.com")||a.includes("youtu.be")){let e=t.searchParams.get("v");if(!e&&a.includes("youtu.be"))e=t.pathname.split("/").pop()||null;else if(!e){let a=t.pathname.match(/\/(?:watch|embed)\/([^/?]+)/);a&&(e=a[1])}if(e)return`https://www.youtube.com/embed/${e}?autoplay=0&enablejsapi=1&modestbranding=1&rel=0`}if(a.includes("vimeo.com")){let e=t.pathname.split("/").pop();if(e&&/^\d+$/.test(e))return`https://player.vimeo.com/video/${e}?autoplay=0`}if(a.includes("tiktok.com")){let e=t.pathname.split("/"),a=e.findIndex(e=>"video"===e);if(-1!==a&&e[a+1]){let t=e[a+1];return`https://www.tiktok.com/embed/${t}`}}if(a.includes("instagram.com")&&(t.pathname.includes("/reel/")||t.pathname.includes("/p/")))return`https://www.instagram.com${t.pathname}/embed/`;if(a.includes("facebook.com")&&t.pathname.includes("/videos/"))return`https://www.facebook.com/plugins/video.php?href=${encodeURIComponent(e)}&show_text=false`;if(a.includes("twitter.com")||a.includes("x.com")){let e=t.pathname.match(/\/status\/(\d+)/);if(e){let t=e[1];return`https://platform.twitter.com/embed/Tweet.html?id=${t}`}}if(a.includes("dailymotion.com")){let e=t.pathname.match(/\/video\/([a-zA-Z0-9]+)/);if(e){let t=e[1];return`https://www.dailymotion.com/embed/video/${t}`}}return""}catch(t){return console.error("Error parsing video URL:",e,t),""}})(e):"";return(0,t.jsx)("div",{className:"post-video-container",children:s?(0,t.jsx)(g,{videoUrl:e,poster:E.length>0?E[0]:void 0,index:a}):r?(0,t.jsxs)("div",{className:"external-video-wrapper",children:[(0,t.jsx)("iframe",{src:r,className:"post-media-video",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:`Video ${a+1}`,onLoad:()=>{},onError:e=>console.error("External video iframe error:",e)}),(0,t.jsx)("div",{style:{position:"absolute",bottom:"5px",right:"5px",background:"rgba(0,0,0,0.7)",color:"white",padding:"2px 6px",borderRadius:"3px",fontSize:"10px",zIndex:10},children:"External Video"})]}):(0,t.jsx)("div",{className:"video-error",children:"Unable to load video. Unsupported URL format."})},a)})}),e.tags&&e.tags.length>0&&(0,t.jsx)("div",{className:"post-tags",children:e.tags.map((e,a)=>(0,t.jsxs)("span",{className:"tag",children:["#",e]},a))}),(0,t.jsx)("div",{className:"post-stats",children:(0,t.jsxs)("div",{className:"stats-info",children:[e.likesCount>0&&(0,t.jsxs)("span",{className:"likes-count",children:[(0,t.jsx)(i,{size:16,fill:"currentColor"}),e.likesCount]}),r&&e.commentsCount>0&&(0,t.jsxs)("span",{className:"comments-count",onClick:()=>x(!p),children:[e.commentsCount," comments"]}),!r&&e.commentsCount>0&&(0,t.jsxs)("span",{className:"comments-count disabled",children:[e.commentsCount," comments"]})]})}),(0,t.jsxs)("div",{className:"post-actions",children:[(0,t.jsxs)("button",{className:`action-btn like ${e.userLiked?"liked":""}`,onClick:()=>u(e.id),children:[(0,t.jsx)(i,{size:18,fill:e.userLiked?"currentColor":"none"}),"Like"]}),r?(0,t.jsxs)("button",{className:"action-btn comment",onClick:()=>x(!p),children:[(0,t.jsx)(n,{size:18}),"Comment"]}):(0,t.jsxs)("button",{className:"action-btn comment disabled",onClick:()=>alert("Please log in to view comments"),children:[(0,t.jsx)(n,{size:18}),"Comment"]}),(0,t.jsxs)("button",{className:"action-btn share",onClick:()=>h(e),children:[(0,t.jsx)(l,{size:18}),"Share"]})]}),p&&r&&(0,t.jsxs)("div",{className:"comments-section",children:[(0,t.jsx)("div",{className:"comments-list",children:v.map(e=>(0,t.jsxs)("div",{className:"comment",children:[(0,t.jsx)("div",{className:"comment-avatar",children:e.profiles?.avatar_url?(0,t.jsx)("img",{src:e.profiles.avatar_url,alt:e.profiles.username}):(0,t.jsx)(d.User,{size:24})}),(0,t.jsxs)("div",{className:"comment-content",children:[(0,t.jsxs)("div",{className:"comment-bubble",children:[(0,t.jsx)("strong",{children:e.profiles?.full_name||e.profiles?.username||"Anonymous"}),(0,t.jsx)("p",{children:e.content})]}),(0,t.jsx)("span",{className:"comment-time",children:new Date(e.created_at).toLocaleDateString()})]})]},e.id))}),(0,t.jsxs)("div",{className:"add-comment",children:[(0,t.jsx)("div",{className:"comment-avatar",children:r.avatar_url?(0,t.jsx)("img",{src:r.avatar_url,alt:r.username}):(0,t.jsx)(d.User,{size:24})}),(0,t.jsxs)("div",{className:"comment-input-container",children:[(0,t.jsx)("input",{type:"text",value:f,onChange:e=>y(e.target.value),placeholder:"Write a comment...",onKeyDown:e=>"Enter"===e.key&&U()}),(0,t.jsx)("button",{onClick:U,disabled:!f.trim(),className:"post-comment-btn",children:"Post"})]})]})]}),N&&(0,t.jsx)("div",{className:"image-modal-overlay",onClick:R,children:(0,t.jsxs)("div",{className:"image-modal-content",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("button",{className:"modal-close-btn",onClick:R,children:"×"}),(0,t.jsxs)("div",{className:"modal-image-container",children:[(0,t.jsx)("img",{src:E[C],alt:`Modal image ${C+1}`,className:"modal-image"}),E.length>1&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{className:"modal-nav prev",onClick:()=>{_(e=>(e-1+E.length)%E.length)},children:"‹"}),(0,t.jsx)("button",{className:"modal-nav next",onClick:()=>{_(e=>(e+1)%E.length)},children:"›"}),(0,t.jsx)("div",{className:"modal-indicators",children:E.map((e,a)=>(0,t.jsx)("button",{className:`modal-indicator ${a===C?"active":""}`,onClick:()=>_(a)},a))}),(0,t.jsxs)("div",{className:"modal-counter",children:[C+1," / ",E.length]})]})]})]})})]})};e.s(["default",0,()=>{let[e,r]=(0,a.useState)([]),[i,n]=(0,a.useState)(!0),[l,o]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{let{data:{user:e}}=await s.supabase.auth.getUser();if(e){let{data:t}=await s.supabase.from("profiles").select("*").eq("id",e.id).single();o(t)}})()},[]),(0,a.useEffect)(()=>{(async()=>{try{let{data:e,error:t}=await s.supabase.from("posts").select(`
            *,
            profiles: user_id (id, username, full_name, avatar_url)
          `).order("created_at",{ascending:!0}).limit(20);if(t)throw t;let{data:{user:a}}=await s.supabase.auth.getUser(),i=await Promise.all((e||[]).map(async e=>{let[t,r,i]=await Promise.all([s.supabase.from("likes").select("*",{count:"exact",head:!0}).eq("post_id",e.id),s.supabase.from("comments").select("*",{count:"exact",head:!0}).eq("post_id",e.id),a?s.supabase.from("likes").select("id").eq("post_id",e.id).eq("user_id",a.id).maybeSingle():Promise.resolve({data:null})]);return{...e,author:e.profiles||null,likesCount:t.count||0,commentsCount:r.count||0,userLiked:!!i.data}}));r(i)}catch(e){console.error("Error fetching posts:",e)}finally{n(!1)}})()},[]);let c=async e=>{if(!l)return void alert("Please log in to like posts");try{let{data:t}=await s.supabase.from("likes").select("id").eq("post_id",e).eq("user_id",l.id).maybeSingle();t?(await s.supabase.from("likes").delete().eq("post_id",e).eq("user_id",l.id),r(t=>t.map(t=>t.id===e?{...t,likesCount:t.likesCount-1,userLiked:!1}:t))):(await s.supabase.from("likes").insert({post_id:e,user_id:l.id}),r(t=>t.map(t=>t.id===e?{...t,likesCount:t.likesCount+1,userLiked:!0}:t)))}catch(e){console.error("Error toggling like:",e)}},d=async e=>{let t=`${window.location.origin}/blog/post/${e.id}`,a={title:e.title||"Check out this post",text:e.content?e.content.substring(0,150)+(e.content.length>150?"...":""):"Check out this interesting post",url:t};if(navigator.share)try{await navigator.share(a),m()}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;console.error("Error sharing:",e),await u(t)}else await u(t)},m=()=>{let e=document.createElement("div");e.className="share-success-toast",e.innerHTML=`
      <div class="share-success-content">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M22 2L11 13"></path>
          <path d="M22 2L15 22 11 13 2 9 22 2Z"></path>
        </svg>
        <span>Post shared successfully!</span>
      </div>
    `,document.body.appendChild(e),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},3e3)},u=async e=>{try{await navigator.clipboard.writeText(e),m();let t=document.createElement("div");t.className="share-success-toast clipboard-toast",t.innerHTML=`
        <div class="share-success-content">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M16 4h.01"></path>
            <path d="M16 20h.01"></path>
            <path d="M8 8h.01"></path>
            <path d="M8 16h.01"></path>
            <rect x="4" y="4" width="16" height="16" rx="2"></rect>
            <path d="M9 12l2 2 4-4"></path>
          </svg>
          <span>Link copied to clipboard!</span>
        </div>
      `,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},3e3)}catch(t){console.error("Failed to copy to clipboard:",t),alert(`Share this link: ${e}`)}};return(0,t.jsx)("div",{className:"blog-page",children:(0,t.jsx)("main",{className:"post-content",children:(0,t.jsx)("div",{className:"container",children:(0,t.jsx)("div",{className:"posts-feed",children:i?(0,t.jsx)("div",{className:"loading-spinner"}):0===e.length?(0,t.jsx)("p",{className:"no-posts",children:"No posts available."}):e.map(e=>(0,t.jsx)(j,{post:e,currentUser:l,onLike:c,onShare:d},e.id))})})})})}],27925)}]);